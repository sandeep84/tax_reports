{% macro account_table(account_list) -%}
<table class="styled-table">
    <tbody>
        {% for account in account_list %}
        <tr>
            <td>{{ account["name"] }}</td>
            <td width="60px">{% if account["value"] != 0 %}{{ account["value"] }}{% endif %}</td>
            <td>
                {% if account["splits"]|length > 0 %}
                <table>
                    <body>
                        {% for split in account["splits"] %}
                        <tr>
                            <td>{{split["date"]}}</td>
                            <td>{{split["description"]}}</td>
                            <td>{{split["value"]}}</td>
                        </tr>
                        {% endfor %}
                    </body>
                </table>
                {% endif %}
            </td>
            {% if account["children"]|length > 0 %}
            <td>
                {{ account_table(account["children"]) }}
            </td>
            {% endif %}
        </tr>
    </tbody>
    {% endfor %}
</table>
{%- endmacro %}


<html>

<head>
    <title>Test</title>
    <link rel="stylesheet" href="tax_report.css"/>
</head>

<body>
    <h2>Income</h2>
    {{ account_table(summary) }}
</body>

</html>